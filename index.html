<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday ‚Äî Surprise Page</title>
  <style>
    /* ---------------------- Base / Glassmorphism / Layout ---------------------- */
    :root{
      --pink:#ff6781;
      --pink-deep:#ff5b79;
      --glass: rgba(255,255,255,0.06);
      --glass-2: rgba(255,255,255,0.08);
      --accent: rgba(255,255,255,0.85);
      --card-shadow: 0 6px 18px rgba(0,0,0,0.25);
      --radius:16px;
      --soft: 0.6s cubic-bezier(.2,.9,.3,1);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: linear-gradient(180deg,#ff9db3 0%, #ff6b93 40%, #ff6580 100%);
      color:var(--accent);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }
    .container{max-width:1100px;margin:16px auto;padding:20px}
    .row{display:flex;gap:0px}
    .col{flex:1}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border-radius:var(--radius);
      padding:14px;
      box-shadow:var(--card-shadow);
      border:1px solid rgba(255,255,255,0.08);
    }
    h1{font-size:30px;margin:0 0 8px 0}
    p{margin:8px 0}

    /* ---------------------- Header / Hero ---------------------- */
    .hero{display:flex;align-items:center;gap:12px}
    .photo{
      width:110px;height:110px;border-radius:50%;background:linear-gradient(135deg,#ff7fa0,#ff4880);flex:0 0 110px;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:14px;box-shadow:inset 0 -6px 14px rgba(0,0,0,0.15)
    }
    .hero-details{flex:1}
    .meta{display:flex;gap:10px;align-items:center;margin-top:8px}
    .btn{background:linear-gradient(180deg,#ff8aa5,#ff6b91);padding:10px 14px;border-radius:12px;border:0;color:white;cursor:pointer;box-shadow:0 6px 12px rgba(0,0,0,0.15)}

    /* ---------------------- Countdown ---------------------- */
    .countdown{display:flex;gap:12px;align-items:center}
    .count-item{background:var(--glass-2);padding:12px;border-radius:10px;min-width:70px;text-align:center}
    .count-num{font-weight:700;font-size:18px}
    .small{font-size:12px;color:rgba(255,255,255,0.85)}

    /* ---------------------- Gallery / Video ---------------------- */
    .gallery{display:flex;gap:12px;margin-top:14px}
    .thumb{flex:1;min-height:80px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,0.7)}
    .video-wrap{margin-top:18px;border-radius:12px;overflow:hidden}
    video{width:100%;display:block}

  /* ---------------------- Floating Hearts & Balloons ---------------------- */
  .hearts{position:fixed;inset:0;pointer-events:none;z-index:20}
  .heart{position:absolute;width:28px;height:28px;transform:rotate(-45deg);opacity:0.12;will-change:transform,opacity}
  .heart:before,.heart:after{content:'';position:absolute;width:28px;height:28px;border-radius:50%;background:white}
  .heart:before{top:-14px}
  .heart:after{left:14px}

  .balloon{position:fixed;bottom:-120px;width:40px;height:52px;border-radius:50% 50% 45% 45%;opacity:0.95}

    /* ---------------------- Modal / Gift Unlock ---------------------- */
    .overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:40;opacity:0;pointer-events:none;transition:var(--soft)}
    .overlay.open{opacity:1;pointer-events:auto}
    .gift{width:560px;max-width:92%;background:linear-gradient(180deg,#fff 5%,#ffe8ee 100%);padding:22px;border-radius:14px;color:#222; text-align:center}
    .gift h2{margin:0 0 8px}
    .gift .close{position:absolute;right:20px;top:20px;background:none;border:0;font-weight:700}

  /* ---------------------- Video header (no cake) ---------------------- */
  .cake-wrap{display:flex;align-items:center;gap:12px}
  .video-header{display:flex;align-items:center;gap:12px}

  /* Top decorative blinking lights */
  .top-lights{position:fixed;top:12px;left:50%;transform:translateX(-50%);display:flex;gap:10px;z-index:35;pointer-events:none;opacity:0;transition:opacity 900ms ease}
  .top-lights .light{width:12px;height:12px;border-radius:50%;background:#ffd1e6;box-shadow:0 0 8px rgba(255,180,200,0.6);opacity:0.25;transform-origin:center;animation:blink 1.6s infinite ease-in-out}
  .top-lights .light:nth-child(1){background:#ff8aa5;animation-delay:0s}
  .top-lights .light:nth-child(2){background:#ffd1e6;animation-delay:0.15s}
  .top-lights .light:nth-child(3){background:#fff7f8;animation-delay:0.3s}
  .top-lights .light:nth-child(4){background:#ffb3c9;animation-delay:0.45s}
  .top-lights .light:nth-child(5){background:#ffd1e6;animation-delay:0.6s}
  .top-lights .light:nth-child(6){background:#ff9db3;animation-delay:0.75s}
  @keyframes blink{0%{opacity:0.25;transform:scale(0.9)}50%{opacity:1;transform:scale(1.25)}100%{opacity:0.25;transform:scale(0.9)}}
  @media (max-width:600px){.top-lights{top:8px;gap:8px}.top-lights .light{width:9px;height:9px;box-shadow:0 0 6px rgba(255,180,200,0.5)}}
  /* When lights are turned on */
  .lights-on .top-lights{opacity:1}

  /* Page reveal: container hidden until ready */
  .site-hidden .container{opacity:0;transform:translateY(8px);transition:opacity 1100ms ease, transform 1100ms ease}
  .page-ready .container{opacity:1;transform:translateY(0)}

  /* Hide page content until music plays */
  .waiting-for-music .container{opacity:0;transform:translateY(8px);transition:opacity 1100ms ease, transform 1100ms ease}
  .music-playing .container{opacity:1;transform:translateY(0);transition:opacity 2000ms ease-in-out, transform 2000ms ease-in-out}
  
  /* Slow fade effect for page reveal */
  .page-fade-in{animation:slowFadeIn 2.5s ease-in-out forwards}
  @keyframes slowFadeIn{
    0%{opacity:0;transform:translateY(20px) scale(0.95)}
    50%{opacity:0.3;transform:translateY(10px) scale(0.98)}
    100%{opacity:1;transform:translateY(0) scale(1)}
  }
  
  /* Staggered animations for page elements */
  .page-element{opacity:0;transform:translateY(30px);transition:all 1.2s ease}
  .page-element.show{opacity:1;transform:translateY(0)}
  .page-element:nth-child(1){transition-delay:0.2s}
  .page-element:nth-child(2){transition-delay:0.4s}
  .page-element:nth-child(3){transition-delay:0.6s}
  .page-element:nth-child(4){transition-delay:0.8s}
  .page-element:nth-child(5){transition-delay:1.0s}
  .page-element:nth-child(6){transition-delay:1.2s}
  
  /* Happy Birthday section - NEW STYLES */
  .birthday-surprise-section{position:fixed;top:60%;left:50%;transform:translate(-50%,-50%);z-index:250;text-align:center;opacity:0;pointer-events:none;transition:opacity 1.2s ease;width:90%;max-width:650px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:10px}
  .birthday-surprise-section.show{opacity:1;pointer-events:auto}
  .birthday-surprise-section.hide{opacity:0;pointer-events:none}
  
  .birthday-main-text{font-family:'Poppins',sans-serif;font-size:3.6em;font-weight:800;margin:0 0 12px 0;letter-spacing:1px;white-space:nowrap;text-align:center;line-height:1}
  /* Gradient + glow for the headline */
  .birthday-main-text{background:linear-gradient(90deg,#ff9ab1 0%, #ffd27a 45%, #9be7ff 100%);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 10px 28px rgba(0,0,0,0.22)}
  .birthday-word{display:inline-block;margin:0 10px;transition:all 0.8s ease}
  /* Extra emphasis for the name/celebrant */
  .birthday-word.word-3{font-size:1.07em;font-weight:900;letter-spacing:0.5px;text-shadow:0 0 32px rgba(255,150,180,0.95),0 0 64px rgba(255,200,220,0.6)}
  .birthday-word.word-1{animation:wordBlink2sec1 2s ease-in-out infinite}
  .birthday-word.word-2{animation:wordBlink2sec2 2s ease-in-out infinite}
  .birthday-word.word-3{animation:wordBlink2sec3 2s ease-in-out infinite}
  
  @keyframes wordBlink2sec1{0%,40%,100%{opacity:0.4;transform:scale(1);color:#fff;text-shadow:0 0 8px rgba(255,255,255,0.4),0 0 15px rgba(255,107,255,0.2);filter:brightness(0.7)}0%,13%{opacity:1;transform:scale(1.06);color:#ff1493;text-shadow:0 0 25px rgba(255,20,147,1),0 0 50px rgba(255,20,147,0.8),0 0 75px rgba(255,105,180,0.6);filter:brightness(1.4) saturate(1.5)}}
  @keyframes wordBlink2sec2{0%,40%,100%{opacity:0.4;transform:scale(1);color:#fff;text-shadow:0 0 8px rgba(255,255,255,0.4),0 0 15px rgba(107,181,255,0.2);filter:brightness(0.7)}13%,27%{opacity:1;transform:scale(1.06);color:#6bb5ff;text-shadow:0 0 25px rgba(107,181,255,1),0 0 50px rgba(107,181,255,0.8),0 0 75px rgba(107,181,255,0.5);filter:brightness(1.3)}}
  @keyframes wordBlink2sec3{0%,40%,100%{opacity:0.4;transform:scale(1);color:#fff;text-shadow:0 0 8px rgba(255,255,255,0.4),0 0 15px rgba(255,215,0,0.2);filter:brightness(0.7)}27%,40%{opacity:1;transform:scale(1.06);color:#ffd93d;text-shadow:0 0 25px rgba(255,215,0,1),0 0 50px rgba(255,215,0,0.8),0 0 75px rgba(255,215,0,0.5);filter:brightness(1.3)}}
  
  .birthday-lights-row{display:flex;justify-content:center;gap:14px;margin-bottom:12px;align-items:center}
  .birthday-light-big{width:16px;height:16px;border-radius:50%;background:#ffd1e6;box-shadow:0 0 20px rgba(255,180,200,0.9),0 0 40px rgba(255,107,107,0.5);animation:lightBlink 2.4s infinite ease-in-out}
  .birthday-light-big:nth-child(1){background:#ff6b6b;animation-delay:0s}
  .birthday-light-big:nth-child(2){background:#ffd1e6;animation-delay:0.15s}
  .birthday-light-big:nth-child(3){background:#fff;animation-delay:0.3s}
  .birthday-light-big:nth-child(4){background:#ffb3c9;animation-delay:0.45s}
  .birthday-light-big:nth-child(5){background:#ffd1e6;animation-delay:0.6s}
  .birthday-light-big:nth-child(6){background:#ff8aa5;animation-delay:0.75s}
  .birthday-light-big:nth-child(7){background:#ffd1e6;animation-delay:0.9s}
  .birthday-light-big:nth-child(8){background:#ffb3c9;animation-delay:1.05s}
  @keyframes lightBlink{0%,100%{opacity:0.4;transform:scale(0.9);box-shadow:0 0 10px rgba(255,180,200,0.5)}50%{opacity:1;transform:scale(1.3);box-shadow:0 0 30px rgba(255,180,200,1),0 0 50px rgba(255,107,107,0.8)}}
  
  /* Ready for Surprise button */
  .surprise-btn{background:linear-gradient(180deg,#ff6b6b,#ff5252);color:white;border:0;padding:16px 35px;border-radius:30px;font-size:20px;font-weight:800;cursor:pointer;box-shadow:0 10px 30px rgba(255,107,107,0.5);transition:all 0.4s ease;text-transform:uppercase;letter-spacing:2px;opacity:0;transform:translateY(20px);animation:btnFadeIn 0.8s ease forwards;animation-delay:3s;margin:-60px auto 0;display:block}
  @keyframes btnFadeIn{to{opacity:1;transform:translateY(0)}}
  .surprise-btn:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 15px 40px rgba(255,107,107,0.7)}
  .surprise-btn:active{transform:translateY(-1px) scale(1.02)}
  
  /* Birthday Cake Animation Styles */
  .bd-cake-wrap{position:relative;width:200px;height:auto;margin:0 auto 6px auto;display:flex;justify-content:center;align-items:center;transform:translateY(-100px)}
  #bd-cake{display:block;position:relative;margin:0 auto}
  .bd-candle{background:#ffffff;border-radius:10px;position:absolute;top:380px;left:50%;margin-left:-2.5px;margin-top:-8px;width:5px;height:35px;transform:translateY(-300px);backface-visibility:hidden;animation:bdCandleIn 500ms 6s ease-out forwards}
  .bd-candle:after,.bd-candle:before{background:rgba(255,0,0,0.4);content:"";position:absolute;width:100%;height:2.2px}
  .bd-candle:after{top:25%;left:0}
  .bd-candle:before{top:45%;left:0}
  .bd-fire{border-radius:100%;position:absolute;top:-20px;left:50%;margin-left:-2.6px;width:6.7px;height:18px}
  .bd-fire:nth-child(1){animation:bdFire 2s 6.5s infinite}
  .bd-fire:nth-child(2){animation:bdFire 1.5s 6.5s infinite}
  .bd-fire:nth-child(3){animation:bdFire 1s 6.5s infinite}
  .bd-fire:nth-child(4){animation:bdFire 0.5s 6.5s infinite}
  .bd-fire:nth-child(5){animation:bdFire 0.2s 6.5s infinite}
  @keyframes bdFire{0%,100%{background:rgba(254,248,97,0.5);box-shadow:0 0 40px 10px rgba(248,233,209,0.2);transform:translateY(0) scale(1)}50%{background:rgba(255,50,0,0.1);box-shadow:0 0 40px 20px rgba(248,233,209,0.2);transform:translateY(-20px) scale(0)}}
  @keyframes bdCandleIn{to{transform:translateY(0)}}
  
  @media (max-width:600px){
    .birthday-surprise-section{width:95%;max-width:100%;padding:8px;top:40%}
  .birthday-main-text{font-size:2.2em;letter-spacing:1px;white-space:normal;text-align:center;margin:0 0 12px 0}
  .birthday-word.word-3{font-size:1.08em}
    .birthday-word{margin:0 6px}
    .birthday-lights-row{gap:10px;margin-bottom:10px}
    .birthday-light-big{width:10px;height:10px}
  .surprise-btn{padding:12px 25px;font-size:16px;margin:-40px auto 0}
    .bd-cake-wrap{width:150px;margin:0 auto 10px auto}
    #bd-cake{width:150px;height:375px}
    /* Mobile-only: move candle to top of the cake in mobile preview */
    .bd-candle{left:50%;margin-left:0;top:75%;transform:translate(-50%,-50%);z-index:40}
  }

  /* Preloader overlay */
  .preload-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(0,0,0,0.85),rgba(0,0,0,0.7));z-index:200}
  .preload-card{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));padding:24px;border-radius:14px;text-align:center;color:var(--accent);box-shadow:0 8px 30px rgba(0,0,0,0.5)}
  .preload-card h3{margin:0 0 10px 0;font-size:18px}
  .preload-btn{background:linear-gradient(180deg,#ff8aa5,#ff6b91);color:white;border:0;padding:10px 16px;border-radius:12px;cursor:pointer;font-weight:700}
  .preload-overlay.hide{opacity:0;transition:opacity 900ms ease}
  

  /* Cake styles (responsive) */
  /* cake color variables: pink palette */
  :root{ --icing: #fff0f6; --cake-bottom: #d13b6a; --cake-mid: #ff7aa3; --cake-top: #ffd6e8 }

  /* keep cake confined inside its card and center contents */
  #cake-section{position:relative;padding:24px 16px;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:280px}
  .cake{position:relative;width:100%;max-width:320px;margin:16px auto;aspect-ratio:250/200}
  /* title positioned above the candle/flame */
  
  .plate{width:110%;height:55%;position:absolute;bottom:-6%;left:-5%;background:#ccc;border-radius:50%;box-shadow:0 2px 0 #b3b3b3,0 4px 0 #9e9e9e,0 5px 40px rgba(0,0,0,0.45)}
  .cake > *{position:absolute}
  .layer{display:block;width:100%;height:40%;border-radius:50%;background:var(--cake-mid);box-shadow:0 2px 0 rgba(255,255,255,0.03),0 6px 0 rgba(0,0,0,0.08),0 10px 18px rgba(0,0,0,0.12)}
  .layer-top{top:0;background:var(--cake-top)}
  .layer-middle{top:20%;background:var(--cake-mid)}  
  .layer-bottom{top:40%;background:var(--cake-bottom)}
  .icing{top:2%;left:2%;background:var(--icing);width:96%;height:44%;border-radius:50%}
  .icing:before{content:"";position:absolute;top:4%;right:3%;bottom:6%;left:4%;background:rgba(255,255,255,0.8);border-radius:50%;box-shadow:0 0 6px rgba(255,255,255,0.8);z-index:1}
  .drip{display:block;width:18%;height:24%;border-bottom-left-radius:50%;border-bottom-right-radius:50%;background:var(--icing)}
  .drip1{top:26%;left:2%;transform:skewY(15deg);height:22%;width:14%}
  .drip2{top:34%;left:72%;transform:skewY(-15deg)}
  .drip3{top:27%;left:36%;width:32%;border-bottom-left-radius:40px;border-bottom-right-radius:40px}
  /* candle + flame baseline (stable pixel sizes) */
  .candle{position:absolute;background:#7B020B;width:14px;height:48px;border-radius:8px/4px;top:-20px;left:50%;transform:translateX(-50%);z-index:10}
  .candle:before{content:"";position:absolute;top:0;left:0;width:100%;height:8px;border-radius:50%;background:#8e0a12}
  .flame{position:absolute;background:linear-gradient(180deg,#ffd27a,#ff8a00);width:14px;height:38px;border-radius:10px 10px 10px 10px/25px 25px 10px 10px;top:-34px;left:50%;transform:translateX(-50%);z-index:10;box-shadow:0 0 10px rgba(255,140,0,0.6),0 0 22px rgba(255,140,0,0.35);transform-origin:50% 90%;animation:flicker 1s ease-in-out alternate infinite}
  @keyframes flicker{
    0%{transform:translateX(-50%) skewX(5deg);box-shadow:0 0 6px rgba(255,165,0,0.2),0 0 14px rgba(255,165,0,0.18)}
    25%{transform:translateX(-50%) skewX(-5deg);box-shadow:0 0 10px rgba(255,165,0,0.45),0 0 20px rgba(255,165,0,0.35)}
    50%{transform:translateX(-50%) skewX(8deg);box-shadow:0 0 8px rgba(255,165,0,0.3),0 0 18px rgba(255,165,0,0.3)}
    75%{transform:translateX(-50%) skewX(-8deg);box-shadow:0 0 9px rgba(255,165,0,0.35),0 0 18px rgba(255,165,0,0.33)}
    100%{transform:translateX(-50%) skewX(5deg);box-shadow:0 0 10px rgba(255,165,0,0.45),0 0 20px rgba(255,165,0,0.35)}
  }

  /* responsive tweaks for various sizes */
  @media (max-width:600px){
    .container{padding:12px;margin:12px}
    .photo{width:64px;height:64px}
    h1{font-size:18px}
    #cake-section{padding:20px 12px;min-height:240px}
    .cake{max-width:220px;margin:12px auto}
    .plate{height:48%}
    /* slightly smaller candle/flame on narrow screens */
    .candle{width:12px;height:40px;top:-18px}
    .flame{width:12px;height:30px;top:-30px}
    
  }

  @media (min-width:881px){
    .cake{max-width:360px}
    .plate{height:60%}
    /* slightly larger candle/flame on wide screens */
    .candle{width:18px;height:60px;top:-28px}
    .flame{width:18px;height:46px;top:-44px}
    
  }

    /* ---------------------- Quotes Carousel ---------------------- */
    .quotes{margin-top:16px;padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02))}

    /* ---------------------- Controls ---------------------- */
    .controls{display:flex;gap:10px;align-items:center}
    .toggle{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;background:var(--glass);border-radius:12px}

    /* ---------------------- Night mode ---------------------- */
    .night{background:linear-gradient(180deg,#0b1730 0%, #0f2745 100%);}
    .night .card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));}

    /* ---------------------- Responsive ---------------------- */
    /* Default small-screen adjustments */
    @media (max-width:880px){
      .row{flex-direction:column}
      /* stack hero on narrow screens */
      .hero{flex-direction:column;align-items:flex-start}
      .hero-details{width:100%}
      .photo{margin-bottom:10px}
    }

    /* Mobile-specific tweaks */
    @media (max-width:600px){
      .container{max-width:100%;margin:12px;padding:12px}
      h1{font-size:20px}
      .photo{width:72px;height:72px;flex:0 0 72px;font-size:12px}
      .btn{padding:8px 10px;border-radius:10px}
      .count-item{min-width:50px;padding:8px}
      .gallery{flex-direction:row;overflow-x:auto;-webkit-overflow-scrolling:touch}
      .gallery::-webkit-scrollbar{display:none}
      .thumb{min-width:110px;flex:0 0 110px}
      .cake{width:120px;height:90px}
      .gift{width:92%;max-width:380px}
      video{max-height:280px}
      .controls{flex-direction:column;align-items:stretch}
      .controls .btn{width:100%}
      .toggle{padding:6px 8px}
      .meta{gap:8px}
      .heart{opacity:0.06}
      .balloon{display:none}
    }

    /* tiny helpers */
    .hidden{display:none}

  
  </style>
</head>
<body>
  <div class="top-lights" aria-hidden="true">
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
  </div>
  <!-- Birthday Surprise Section - Shows after Play Music -->
  <div class="birthday-surprise-section" id="birthday-surprise">
    <h1 class="birthday-main-text">
      <span class="birthday-word word-1">Happy</span>
      <span class="birthday-word word-2">Birthday</span>
      <span class="birthday-word word-3">Alishba! üéâ</span>
    </h1>
    <div class="birthday-lights-row">
      <div class="birthday-light-big"></div>
      <div class="birthday-light-big"></div>
      <div class="birthday-light-big"></div>
      <div class="birthday-light-big"></div>
      <div class="birthday-light-big"></div>
      <div class="birthday-light-big"></div>
      <div class="birthday-light-big"></div>
      <div class="birthday-light-big"></div>
    </div>
    <!-- Provided SVG Animated Cake under lights (scoped) -->
   
   <div style="display:flex;justify-content:center;margin:0 ">
      <!-- wrap candle + svg together, add left-up class to shift position -->
      <div class="bd-cake-wrap left-up">
        <div class="bd-candle">
          <div class="bd-fire"></div>
          <div class="bd-fire"></div>
          <div class="bd-fire"></div>
          <div class="bd-fire"></div>
          <div class="bd-fire"></div>
        </div>

        <svg id="bd-cake" version="1.1" x="0px" y="0px" width="200px" height="500px" viewBox="0 0 200 500" enable-background="new 0 0 200 500" xml:space="preserve">
          <path fill="#a88679" d="M173.667-13.94c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002 c44.697,0,96.586,0,147.334,0C177.667-29.942,177.668-13.94,173.667-13.94z">
            <animate id="bizcocho_3" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1" begin="relleno_2.end" dur="0.3s" fill="freeze" values="M173.667-13.94c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002 c44.697,0,96.586,0,147.334,0C177.667-29.942,177.668-13.94,173.667-13.94z; M173.667,411.567c-47.995,12.408-102.955,12.561-147.334,0 c-3.848-1.089-0.189-16.089,3.661-15.002c44.836,12.66,90.519,12.753,139.427,0.07 C173.293,395.631,177.541,410.566,173.667,411.567z; M173.667,427.569c-49.795,0-101.101,0-147.334,0c-3.999,0-4-16.002,0-16.002 c46.385,0,97.539,0,147.334,0C177.668,411.567,177.667,427.569,173.667,427.569z" />
          </path>
          <path fill="#8b6a60" d="M100-178.521c1.858,0,3.364,1.506,3.364,3.363c0,0,0,33.17,0,44.227 c0,19.144,0,57.431,0,76.574c0,10.152,0,40.607,0,40.607c0,1.858-1.506,3.364-3.364,3.364l0,0c-1.858,0-3.364-1.506-3.364-3.364c0,0,0-30.455,0-40.607c0-19.144,0-57.432,0-76.575c0-11.057,0-44.226,0-44.226C96.636-177.015,98.142-178.521,100-178.521 L100-178.521z">
            <animate id="relleno_2" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0 0 0.58 1" begin="bizcocho_2.end" dur="0.5s" fill="freeze" values="M100-178.521c1.858,0,3.364,1.506,3.364,3.363c0,0,0,33.17,0,44.227 c0,19.144,0,57.431,0,76.574c0,10.152,0,40.607,0,40.607c0,1.858-1.506,3.364-3.364,3.364l0,0c-1.858,0-3.364-1.506-3.364-3.364c0,0,0-30.455,0-40.607c0-19.144,0-57.432,0-76.575c0-11.057,0-44.226,0-44.226C96.636-177.015,98.142-178.521,100-178.521 L100-178.521z; M100,267.257c1.858,0,3.364,1.506,3.364,3.363c0,0,0,33.17,0,44.227 c0,19.143,0,57.43,0,76.574c0,10.151,0,40.606,0,40.606c0,1.858-1.506,3.364-3.364,3.364l0,0c-1.858,0-3.364-1.506-3.364-3.364 c0,0,0-30.455,0-40.606c0-19.145,0-57.432,0-76.576c0-11.057,0-44.225,0-44.225C96.636,268.763,98.142,267.257,100,267.257 L100,267.257z; M93.928,405.433c-0.655,6.444-0.102,9.067,2.957,11.798c0,0,8.083,5.571,16.828,3.503 c18.629-4.406,43.813,6.194,50.792,7.791c14.75,3.375,9.162,6.867,9.162,6.867c-2.412,2.258-58.328,0-73.667,0l0,0 c-1.858,0-69.995,2.133-73.667,0c0,0-3.337-2.439,6.172-5.992c11.375-4.25,52.875,8.822,47.139-9.442 c-6.333-20.167,5.226-21.514,5.226-21.514c3.435-0.915,12.78-6.663,10.923-0.546L93.928,405.433z; M102.242,427.569c5.348,0,14.079,0,17.462,0c0,0,17.026,0,27.504,0 c19.143,0,20.39-3.797,26.459,0c3,1.877,0,7.823,0,7.823c-2.412,2.258-58.328,0-73.667,0l0,0c-1.858,0-67.187,0-73.667,0 c0,0-4.125-4.983,0-7.823c5.201-3.58,16.085,0,23.725,0c8.841,0,20.762,0,20.762,0c3.686,0,8.597,0,19.511,0H102.242z" />
          </path>
          <path fill="#a88679" d="M173.667-15.929c-46.512,0-105.486,0-147.334,0c-3.999,0-4-16.002,0-16.002 c43.566,0,97.96,0,147.334,0C177.667-31.931,177.666-15.929,173.667-15.929z">
            <animate id="bizcocho_2" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0.25 0 0.58 1" begin="relleno_1.end" dur="0.5s" fill="freeze" values="M173.667-15.929c-46.512,0-105.486,0-147.334,0c-3.999,0-4-16.002,0-16.002 c43.566,0,97.96,0,147.334,0C177.667-31.931,177.666-15.929,173.667-15.929z; M173.434,445.393c-47.269,8.001-105.245,8.001-147.334,0c-3.929-0.747-0.692-16.543,3.243-15.824 c43.828,8.001,92.165,8.001,140.739,0C174.029,428.918,177.377,444.726,173.434,445.393z; M173.667,449.514c-47.576-5.454-102.799-5.744-147.333,0c-3.966,0.512-3.938-15.297,0-16.002 c43.683-7.823,97.646-8.026,147.333,0C177.616,434.15,177.642,449.969,173.667,449.514z; M173.667,451.394c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002 c44.697,0,96.586,0,147.334,0C177.667,435.392,177.668,451.394,173.667,451.394z" />
          </path>
          <path fill="#8b6a60" d="M101.368-73.685c0,12.164,0,15.18,0,28.519c0,22.702,0-13.661,0,8.304c0,14.48,0,18.233,0,30.512 c0,1.753-2.958,1.847-2.958,0c0-12.68,0-16.277,0-30.401c0-21.983,0,11.66,0-8.305c0-13.027,0-15.992,0-28.628 C98.411-75.883,101.368-75.592,101.368-73.685z">
            <animate id="relleno_1" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0 0 0.6 1" begin="bizcocho_1.end" dur="0.5s" fill="freeze" values="M101.368-73.685c0,12.164,0,15.18,0,28.519c0,22.702,0-13.661,0,8.304c0,14.48,0,18.233,0,30.512 c0,1.753-2.958,1.847-2.958,0c0-12.68,0-16.277,0-30.401c0-21.983,0,11.66,0-8.305c0-13.027,0-15.992,0-28.628 C98.411-75.883,101.368-75.592,101.368-73.685z; M101.368,350.885c0,12.164,0,65.18,0,78.518c0,22.703,0-33.66,0-11.695c0,14.48,0,28.232,0,40.512 c0,1.753-2.958,1.847-2.958,0c0-12.68,0-26.277,0-40.402c0-21.982,0,31.66,0,11.695c0-13.027,0-65.992,0-78.627 C98.411,348.686,101.368,348.977,101.368,350.885z; M128.38,447.567c37.626,6.312,39.303,13.658,26.833,12.833c-22.653-1.499-13.636-0.831-23.302-0.831 c-14.48,0-17.884,0-30.163,0c-2.087,0-2.068,0-3.915,0c-13.333,0-8.963,0-23.088,0c-11.668,0-14.062,5.995-27.532,1.164 c-12.629-4.529,38.667-3.167,46.833-17.333C100.077,432.94,105.546,443.736,128.38,447.567z; M173.667,451.394c2.875,0,2.997,9.257,0,9.131c-22.662-0.956-32.09-0.956-41.756-0.956 c-14.48,0-17.884,0-30.163,0c-2.087,0-2.068,0-3.915,0c-13.333,0-8.963,0-23.088,0c-11.668,0-34.99-0.294-48.412,1.831 c-4.109,0.65-3.01-10.006,0-10.006C37.129,451.394,149.379,451.394,173.667,451.394z" />
          </path>
          <path fill="#a88679" d="M173.667,21.571c-33.174,0-111.467,0-147.334,0c-4,0-4-16.002,0-16.002c39.836,0,105.982,0,147.334,0 C177.668,5.569,177.667,21.571,173.667,21.571z">
            <animate id="bizcocho_1" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0 0 1 1; 0.25 0 1 1; 0 0 1 1; 0.25 0 0.6 1" begin="2s" dur="0.8s" fill="freeze" values="M173.667,21.571c-33.174,0-111.467,0-147.334,0c-4,0-4-16.002,0-16.002c39.836,0,105.982,0,147.334,0 C177.668,5.569,177.667,21.571,173.667,21.571z; M173.667,459.569c-33.197,16.002-110.782,16.002-147.334,0c-3.664-1.604,1.614-15.617,5.337-14.153 c40.702,16.002,94.289,16.104,136.505,0.103C171.917,444.1,177.271,457.832,173.667,459.569z; M171.817,475.571c-39.361-3.001-105.438-2.571-143.556,0c-3.991,0.27-7.377-14.736-3.387-15.014 c41.553-2.888,104.421-3.121,150.51-0.233C179.378,460.574,175.806,475.875,171.817,475.571z; M171.817,459.564c-38.8-12.188-104.504-13.762-143.556,0c-3.772,1.329-7.961-12.604-4.178-13.905 c40.864-14.064,105.114-15.52,151.918-0.973C179.822,445.874,175.634,460.762,171.817,459.564z; M173.667,475.571c-46.376-5.005-105.924-4.003-147.334,0c-3.981,0.385-3.479-15.421,0.479-16.002 c43.087-6.327,97.705-7.083,146.855,0.438C177.621,460.613,177.644,476,173.667,475.571z; M173.667,474.117c-46.376,1.866-105.638,2.01-147.334,0c-3.995-0.192-3.52-16.144,0.479-16.002 c43.794,1.55,96.341,1.541,145.723,0C176.532,457.99,177.663,473.956,173.667,474.117z; M173.667,475.571c-46.512,0-105.486,0-147.334,0c-3.999,0-4-16.002,0-16.002c43.566,0,97.96,0,147.334,0 C177.667,459.569,177.666,475.571,173.667,475.571z" />
          </path>
          <path fill="#fefae9" d="M104.812,113.216c0,3.119-2.164,5.67-4.812,5.67c-2.646,0-4.812-2.551-4.812-5.67c0-5.594,0-16.782,0-22.375 c0-5.143,0-15.427,0-20.568c0-7.333,0-21.998,0-29.33c0-5.523,0-16.569,0-22.092c0-3.295,0-9.885,0-13.181 C95.188,2.551,97.353,0,100,0c2.648,0,4.812,2.551,4.812,5.669c0,3.248,0,9.743,0,12.991c0,5.428,0,16.284,0,21.711 c0,7.618,0,22.854,0,30.472c0,4.952,0,14.854,0,19.807C104.812,96.292,104.812,107.576,104.812,113.216z">
            <animate id="crema" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0 0 1 1; 0.25 0 1 1; 0 0 1 1; 0 0 0.58 1" begin="bizcocho_3.end" dur="2s" fill="freeze" values="M104.812,113.216c0,3.119-2.164,5.67-4.812,5.67c-2.646,0-4.812-2.551-4.812-5.67c0-5.594,0-16.782,0-22.375 c0-5.143,0-15.427,0-20.568c0-7.333,0-21.998,0-29.33c0-5.523,0-16.569,0-22.092c0-3.295,0-9.885,0-13.181 C95.188,2.551,97.353,0,100,0c2.648,0,4.812,2.551,4.812,5.669c0,3.248,0,9.743,0,12.991c0,5.428,0,16.284,0,21.711 c0,7.618,0,22.854,0,30.472c0,4.952,0,14.854,0,19.807C104.812,96.292,104.812,107.576,104.812,113.216z; M104.812,405.897c0,3.119-2.164,5.67-4.812,5.67c-2.646,0-4.812-2.551-4.812-5.67c0-5.594,0-16.782,0-22.376 c0-5.143,0-15.426,0-20.568c0-7.332,0-21.997,0-29.33c0-5.522,0-16.568,0-22.092c0-3.295,0-9.885,0-13.181 c0-3.118,2.165-5.669,4.812-5.669c2.648,0,4.812,2.551,4.812,5.669c0,3.247,0,9.743,0,12.991c0,5.428,0,16.283,0,21.711 c0,7.618,0,22.854,0,30.473c0,4.951,0,14.854,0,19.807C104.812,388.972,104.812,400.256,104.812,405.897z; M111.873,411.567c-3.119,0-9.226,0-11.874,0c-2.646,0-7.748,0-10.867,0c-7.086,0-12.698,0-18.292,0 c-6.592,0-12.871,7.371-19.166,3.008c-10.043-6.961-7.776-10.169,2.991-17.745c12.61-8.873,27.713,1.994,25.919-7.531 c-2.589-13.742,11.008-14.513,11.365-17.789c0.441-4.051,4.235-11.107,8.051-8.175c3.113,2.393,1.007,8.008,0,13.159 c-1.871,9.569,8.058,2.113,9.494,14.155c2.592,21.732,21.184-0.675,29.309,7.976c5.216,5.553,18.413,5.552,15.426,12.942 c-3.131,7.745-15.825-4.369-23.8,2.903C126.261,418.271,118.301,411.567,111.873,411.567z; M111.873,411.567c-3.119,0-9.226,0-11.874,0c-2.646,0-9.734,4.069-12.853,4.069 c-7.086,0-10.712-4.069-16.306-4.069c-6.592,0-12.12,6.013-19.166,3.008c-7.053-3.008-7.458,2.026-18.659,1.165 c-6.832-0.525-7.522-3.034-7.533-6.265c-0.037-10.336,22.073-2.452,36.613-2.628c10.234-0.124,19.856-1.439,37.905-2.102 c16.642-0.61,32.699,1.552,46.009,1.927c12.438,0.351,29.663-8.99,31.532,3.315c0.773,5.093-5.605,3.342-11.211,9.579 c-5.093,5.667-7.59-4.605-12.965-3.832c-8.269,1.189-14.962-8.537-22.937-1.265C126.261,418.271,118.301,411.567,111.873,411.567z; M110.946,413.652c-2.904-1.137-8.405-2.748-12.446-0.97c-6.099,2.685-7.273,10.358-13.253,8.242 c-7.843-2.775-8.953-5.008-14.546-5.01c-24.653-0.011-4.849,26.507-18.264,26.507c-12.377,0,5.791-33.537-19.422-26.682 c-7.703,2.095-9.806-0.942-9.817-4.173c-0.037-10.336,24.357-4.544,38.897-4.72c10.234-0.124,19.856-1.439,37.905-2.102 c16.642-0.61,32.699,1.552,46.009,1.927c12.438,0.351,28.973-8.865,31.532,3.315c1.449,6.896,0.318,15.624-3.874,15.624 c-7.619,0-1.788-15.192-19.243-7.111c-7.581,3.51-15.963-9.738-26.669,1.066C120.644,426.744,118.381,416.561,110.946,413.652z; M111.547,413.9c-2.969-0.956-8.775-0.949-13.167-0.5c-14.667,1.5-8.325,16.508-14.667,16.666 c-6.667,0.166-0.167-13.5-13.013-14.151c-30.471-1.545-5.572,46.651-18.987,46.651c-12.377,0,10.333-50.166-18.667-44.5 c-7.835,1.531-9.537-1.417-9.548-4.647c-0.037-10.336,23.675-5.177,38.215-5.353c10.234-0.124,20.618-1.671,38.667-2.333 c16.642-0.61,32.023,1.458,45.333,1.833c12.438,0.351,33.819-8.431,33.199,4.001c-0.532,10.666,0.414,26.166-5.245,25.833 c-7.606-0.447-2.954-31.5-19.243-18.899c-7.985,6.177-17.658-5.969-27.377,5.732C118.88,434.066,121.38,417.067,111.547,413.9z; M111.547,415.233c-6.667-0.834-9.667,4.667-13.833,3.333c-19.649-6.291-8.158,22.176-14.5,22.334 c-6.667,0.166,2.833-18-13.333-22.167c-29.544-7.615-9.667,43.833-20.167,43.833c-10.333,0,8.004-55.006-16.833-39 c-7.5,4.833-9.508-3.78-9.299-7.004c0.799-12.329,23.592-7.153,38.132-7.329c10.234-0.124,20.238-1.505,38.287-2.167 c16.642-0.61,32.903,1.125,46.213,1.5c12.438,0.351,35.058-5.579,31.863,6.451c-5.532,20.833,1.25,28.216-4.409,27.883 c-7.606-0.447-6.058-37.895-20.62-23.333c-10.167,10.166-15.972-0.747-25,12C119.547,443.568,121.798,416.515,111.547,415.233z" />
          </path>
          <rect x="10" y="475.571" fill="#fefae9" width="180" height="4" />
        </svg>
      </div>
    </div>
    <button class="surprise-btn" id="ready-surprise-btn">Ready for Surprise</button>
  </div>
  
  <!-- Preload overlay with Turn on lights button -->
  <div class="preload-overlay" id="preload">
    <div class="preload-card">
      <h3>Ready to celebrate?</h3>
      <p class="small">Click the button to turn on the lights and reveal the surprise.</p>
      <div style="height:10px"></div>
      <button class="preload-btn" id="turn-on-btn">Turn on lights</button>
    </div>
  </div>
  <div class="hearts" id="hearts"></div>
  <div class="container">

    <!-- HEADER -->
    <div class="card hero page-element">
      <div class="photo">Her Photo</div>
      <div class="hero-details">
        <h1>Happy Birthday, Meri Jaan! üéâ</h1>
        <div class="meta">
          <div class="countdown card" style="display:inline-flex;align-items:center;gap:10px;padding:8px;">
            <div class="count-item"><div class="count-num" id="days">0</div><div class="small">Days</div></div>
            <div class="count-item"><div class="count-num" id="hours">0</div><div class="small">Hours</div></div>
            <div class="count-item"><div class="count-num" id="mins">0</div><div class="small">Minutes</div></div>
            <div class="count-item"><div class="count-num" id="secs">0</div><div class="small">Seconds</div></div>
          </div>
          <div style="flex:1"></div>
          <button class="btn" id="open-gift">Open your gift üéÅ</button>
        </div>

        <!-- New container inserted below Gallery -->
        <div class="card" style="margin-top:12px" id="below-gallery-container">
          <h3>Container</h3>
          <p class="small">Yeh naya container aapke gallery ke neeche hai. Aap isme kuch bhi rakh sakte hain.</p>
        </div>
      </div>
    </div>

    <!-- MESSAGE + GALLERY -->
    <div class="row page-element" style="margin-top:16px">
      <div class="col">
        <div class="card">
          <h3>Mera message</h3>
          <p id="short-msg">Janamdin mubarak meri pyari biwi. Tumhari har muskurahat mere liye sab kuch hai...</p>
          <div style="margin-top:10px;" class="controls">
            <button class="btn" id="read-more">Read full message ‚ù§Ô∏è</button>
            <div style="flex:1"></div>
            <div class="toggle">
              <label>Music</label>
              <button id="music-toggle" class="btn">Play</button>
            </div>
            <div class="toggle">
              <label>Night</label>
              <input type="checkbox" id="mode-toggle" />
            </div>
          </div>
        </div> 

        <div class="card" style="margin-top:12px">
          <h3>Gallery</h3>
          <div class="gallery" id="gallery">
            <div class="thumb">Photo 1</div>
            <div class="thumb">Photo 2</div>
            <div class="thumb">Photo 3</div>
          </div>
        </div>

        <div class="card" style="margin-top:12px" id="cake-section">
          <div class="cake">
              <div class="plate"></div>
              <div class="layer layer-bottom"></div>
              <div class="layer layer-middle"></div>
              <div class="layer layer-top"></div>
              <div class="icing"></div>
              <div class="drip drip1"></div>
              <div class="drip drip2"></div>
              <div class="drip drip3"></div>
              <div class="candle">
                  <div class="flame"></div>
              </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Love Quotes</h3>
          <div class="quotes" id="quotes">"Tum meri subah aur meri raat ho. Har pal tumhara shukriya."</div>
        </div>
      </div>

      <div class="col">
        <div class="card video-wrap page-element">
          <div class="cake-wrap video-header">
            <div style="flex:1">
              <h3>Video Poster</h3>
              <p class="small">Click gift to unlock the surprise video message.</p>
            </div>
          </div>

          <div style="height:12px"></div>
          <div style="border-radius:8px;overflow:hidden;background:rgba(0,0,0,0.06);">
            <video id="surprise-video" controls muted playsinline webkit-playsinline>
              <!-- Replace 'video.mp4' with your recorded surprise video file path -->
              <source src="video.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Small Extras</h3>
          <p class="small">Extra buttons or links here (e.g., link to more photos, a printable card, or a surprise note).</p>
        </div>
      </div>
    </div>

    <div style="height:22px"></div>
    <div class="card" style="text-align:center;font-size:13px;">Made with ‚ù§Ô∏è for her</div>
  </div>

  <!-- GIFT MODAL -->
  <div class="overlay" id="overlay">
    <div class="gift card">
      <button class="close" id="close-overlay">‚úï</button>
      <h2>Surprise!</h2>
      <p>Click the play button below to watch the video message.</p>
      <div style="margin-top:12px">
  <video id="modal-video" controls muted playsinline webkit-playsinline style="width:100%;border-radius:8px;max-height:420px">
          <source src="video.mp4" type="video/mp4">
        </video>
      </div>
      <div style="margin-top:12px">
        <button class="btn" id="confetti-btn">Throw Confetti üéä</button>
      </div>
    </div>
  </div>

  <!-- counter will be moved into the left column under Gallery -->

  <!-- Background audio (uses local Happy_birthday_to_you_MIDI file) -->
  <audio id="bg-music" loop>
    <source src="Happy_birthday_to_you_MIDI(chosic.com).mp3" type="audio/mpeg">
    <!-- Fallback: if the named file isn't found, browser will try music.mp3 if present -->
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <!-- Confetti canvas -->
  <canvas id="confetti-canvas" style="position:fixed;inset:0;pointer-events:none;z-index:60"></canvas>

  <script>
    /* ---------------------- Small utilities ---------------------- */
    const $ = (s)=>document.querySelector(s);
    const $$ = (s)=>document.querySelectorAll(s);

    /* ---------------------- Countdown to next birthday (Sept 2) ---------------------- */
    function nextBirthdayMonthDay(month=9,day=2){
      const now = new Date();
      let year = now.getFullYear();
      const target = new Date(year, month-1, day, 0,0,0);
      if(target <= now) target.setFullYear(year+1);
      return target;
    }
    const targetDate = nextBirthdayMonthDay(9,2); // user's birthday Sep 2 (change if you want)
    function updateCountdown(){
      const now=new Date();
      let diff = Math.max(0, Math.floor((targetDate - now)/1000));
      const days = Math.floor(diff/86400); diff%=86400;
      const hours = Math.floor(diff/3600); diff%=3600;
      const mins = Math.floor(diff/60); const secs = diff%60;
      $('#days').textContent = days;
      $('#hours').textContent = hours;
      $('#mins').textContent = mins;
      $('#secs').textContent = secs;
    }
    setInterval(updateCountdown,1000); updateCountdown();

    /* ---------------------- Message modal (Read more) ---------------------- */
    $('#read-more').addEventListener('click',()=>{
      alert('Janamdin mubarak meri pyari biwi!\n\nTum meri zindagi ka sabse khubsurat hissa ho. Aaj tumhare liye maine yeh chhota sa surprise banaya ‚Äî video ke zariye ek paigham hai. I love you. ‚ù§Ô∏è');
    });

    /* ---------------------- Night mode toggle ---------------------- */
    $('#mode-toggle').addEventListener('change', (e)=>{
      if(e.target.checked) document.body.classList.add('night'); else document.body.classList.remove('night');
    });

    /* ---------------------- Music control ---------------------- */
    const music = $('#bg-music');
    const musicBtn = $('#music-toggle');
    musicBtn.addEventListener('click', ()=>{
      if(music.paused){ music.play(); musicBtn.textContent='Pause'; }
      else{ music.pause(); musicBtn.textContent='Play'; }
    });

    /* ---------------------- Gift modal open/close and unlock behavior ---------------------- */
    const overlay = $('#overlay');
    $('#open-gift').addEventListener('click', ()=>{
      overlay.classList.add('open');
      // start subtle animations
      $('#modal-video').currentTime = 0;
      $('#modal-video').play().catch(()=>{});
  // (no cake/flame in this version)
      // start confetti a little
      launchConfetti(70);
    });
    $('#close-overlay').addEventListener('click', ()=>{
      overlay.classList.remove('open');
      $('#modal-video').pause();
    });
    $('#confetti-btn').addEventListener('click', ()=>{launchConfetti(120);});

    /* ---------------------- Simple confetti system (canvas) ---------------------- */
    const confettiCanvas = $('#confetti-canvas');
    const ctx = confettiCanvas.getContext('2d');
    let confettiPieces = [];
    function resizeCanvas(){ confettiCanvas.width = innerWidth; confettiCanvas.height = innerHeight; }
    addEventListener('resize', resizeCanvas); resizeCanvas();

    function rnd(min,max){return Math.random()*(max-min)+min}
    function launchConfetti(count=50){
      for(let i=0;i<count;i++){
        confettiPieces.push({
          x:rnd(0,confettiCanvas.width),
          y:rnd(-200, -10),
          w:rnd(6,12), h:rnd(8,16),
          vx:rnd(-1.5,1.5), vy:rnd(1,4),
          rot:rnd(0,6.28), vr:rnd(-0.1,0.1),
          color:['#fff','#ffd3e0','#fff7f8','#ffd1da'][Math.floor(rnd(0,4))]
        });
      }
    }
    function confettiTick(){
      ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
      for(let i=confettiPieces.length-1;i>=0;i--){
        const p = confettiPieces[i];
        p.x += p.vx; p.y += p.vy; p.vy += 0.05; p.rot += p.vr;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot);
        ctx.fillStyle = p.color; ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);
        ctx.restore();
        if(p.y > confettiCanvas.height+60) confettiPieces.splice(i,1);
      }
      requestAnimationFrame(confettiTick);
    }
    confettiTick();

    /* ---------------------- Floating hearts in background ---------------------- */
    const heartsContainer = document.getElementById('hearts');
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      h.style.left = Math.random() * 100 + '%';
      h.style.bottom = '-40px';
      h.style.width = (10 + Math.random() * 36) + 'px';
      h.style.height = h.style.width;
      h.style.opacity = 0.08 + Math.random() * 0.12;
      heartsContainer.appendChild(h);

      const dur = 8 + Math.random() * 16;
      h.animate(
        [
          { transform: 'translateY(0) scale(1)' },
          { transform: `translateY(-${200 + Math.random() * 600}px) scale(1.2)` }
        ],
        { duration: dur * 1000, iterations: 1, easing: 'linear' }
      );

      setTimeout(() => h.remove(), (dur + 0.8) * 1000);
    }
  let heartInterval = setInterval(spawnHeart, 700);

    /* ---------------------- Floating balloons (decorative) ---------------------- */
    function spawnBalloon(){
      const b = document.createElement('div'); b.className='balloon';
      b.style.left = Math.random()*92 + '%';
      b.style.background = `linear-gradient(180deg, rgba(255,255,255,0.2), rgba(255,255,255,0.05)), linear-gradient(180deg, rgba(255,0,100,0.9), rgba(255,130,170,0.9))`;
      document.body.appendChild(b);
      const dur = 10+Math.random()*18;
      b.animate([{transform:'translateY(0) scale(1)'},{transform:`translateY(-${600+Math.random()*800}px) scale(1.1)`}],{duration:dur*1000,iterations:1,easing:'ease-out'});
      setTimeout(()=>b.remove(), (dur+0.6)*1000);
    }
  let balloonInterval = setInterval(spawnBalloon,2200);

    /* ---------------------- Quotes carousel (auto) ---------------------- */
    const quotes = [
      'Tum meri subah aur meri raat ho. Har pal tumhara shukriya.',
      'Jab tum muskuraati ho, lagta hai sab kuch theek hai.',
      'Meri zindagi tumse hi roshan hai ‚Äî janamdin mubarak!',
      'Har saal tumhare saath beeta, har pal khaas ban gaya.'
    ];
    let qi=0; function rotateQuotes(){ $('#quotes').textContent = '"'+quotes[qi]+'"'; qi=(qi+1)%quotes.length; }
    setInterval(rotateQuotes,4500); rotateQuotes();

    /* ---------------------- Simple Gallery slider (click to change) ---------------------- */
    const thumbs = $$('#gallery .thumb'); let tg=0;
    thumbs.forEach((t,i)=>{t.addEventListener('click',()=>{thumbs.forEach(x=>x.style.transform='scale(1)'); t.style.transform='scale(1.03)'; alert('Open bigger photo or lightbox here.');});});

    /* ---------------------- Mobile performance adjustments ---------------------- */
    const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent) || innerWidth <= 600;
    // if on mobile, reduce background animation frequency and avoid starting audio autoplay
    if(isMobile){
      // slow down hearts and balloons: clear existing intervals then rebind lighter ones
      if(typeof heartInterval !== 'undefined') clearInterval(heartInterval);
      if(typeof balloonInterval !== 'undefined') clearInterval(balloonInterval);
      // limit heart spawn
      heartInterval = setInterval(spawnHeart, 1400);
      // reduce balloons (or disable) - keep interval long
      balloonInterval = setInterval(spawnBalloon, 10000);
      // reduce confetti emission by making launchConfetti no-op unless explicitly called
      const origLaunchConfetti = launchConfetti;
      window.launchConfetti = function(count=0){ if(!isMobile) origLaunchConfetti(count); else origLaunchConfetti(Math.min(60, count)); }
      // avoid auto-playing music
      if(!music.paused) music.pause();
      musicBtn.textContent = 'Play';
    }

    /* ---------------------- Small safety notes: replace video/music files ---------------------- */
    // NOTE to user: replace 'video.mp4' and 'music.mp3' with your local file names or URLs.

    

  </script>
  <script>
    // Preloader / Turn on lights flow
    (function() {
      const body = document.body;
      const preload = document.getElementById('preload');
      const btn = document.getElementById('turn-on-btn');
      const topLights = document.querySelector('.top-lights');
      const bgMusic = document.getElementById('bg-music');

      // Start with page content hidden to prevent accidental autoplay and to focus user action
      body.classList.add('site-hidden', 'waiting-for-music');

      // Create CSS for single bulb and floating music button if not present
      (function ensureStyles(){
        const styleId = 'single-bulb-styles';
        if(document.getElementById(styleId)) return;
        const s = document.createElement('style'); s.id = styleId;
        s.textContent = `
          /* three bulbs that drop from above and fade in with stagger */
          .single-bulb{position:fixed;left:50%;top:-20%;transform:translateX(-50%) translateY(-10vh) scale(0.9);width:90px;height:140px;border-radius:48px 48px 36px 36px;background:linear-gradient(180deg,#fff9e6,#ffd27a);box-shadow:0 12px 40px rgba(255,200,120,0.6),0 0 60px rgba(255,190,100,0.4);display:flex;align-items:center;justify-content:center;z-index:210;opacity:0;transition:opacity 900ms ease, transform 900ms ease}
          .single-bulb .filament{width:16px;height:40px;background:linear-gradient(180deg,#ffcc6a,#ff8a00);border-radius:10px;box-shadow:0 0 15px rgba(255,180,60,0.9);transition:opacity 900ms ease}
          .single-bulb.bulb-1{left:38%}
          .single-bulb.bulb-2{left:50%}
          .single-bulb.bulb-3{left:62%}
          .single-bulb.visible{opacity:1;transform:translateX(-50%) translateY(8vh) scale(1)}
          .single-bulb.visible .filament{opacity:1}
          .music-playing .single-bulb{opacity:0;transform:translate(-50%,-50%) scale(0.8);pointer-events:none}
          .music-playing .single-bulb .filament{opacity:0}
          .music-launch-btn{position:fixed;top:calc(50% + 20px);left:50%;transform:translateX(-50%) translateY(6px);z-index:215;padding:12px 20px;border-radius:16px;border:0;background:linear-gradient(180deg,#ff8aa5,#ff6b91);color:white;font-weight:700;box-shadow:0 8px 24px rgba(0,0,0,0.25);cursor:pointer;font-size:16px;transition:all 1.5s ease;opacity:0;pointer-events:none}
          .music-launch-btn.show{opacity:1;transform:translateX(-50%) translateY(0);pointer-events:auto}
          .music-playing .music-launch-btn{opacity:0;transform:translateX(-50%) translateY(20px);pointer-events:none}
          
          /* Mobile tweak: move Play Music button higher */
          @media (max-width:600px){
            .music-launch-btn{top:calc(50% - 60px);transform:translateX(-50%) translateY(0);}
          }
          .show-birthday-section .single-bulb,
          .show-birthday-section .music-launch-btn{opacity:0!important;pointer-events:none!important}
        `;
        document.head.appendChild(s);
      })();

      function createSingleBulb(){
        // create three bulbs if not present and return the NodeList
        const existing = document.querySelectorAll('.single-bulb');
        if(existing && existing.length===3) return existing;
        // remove any existing bulbs
        document.querySelectorAll('.single-bulb').forEach(n=>n.remove());
        const bulbs = [];
        for(let i=1;i<=3;i++){
          const bulb = document.createElement('div'); bulb.className = 'single-bulb bulb-' + i;
          const filament = document.createElement('div'); filament.className = 'filament';
          bulb.appendChild(filament);
          document.body.appendChild(bulb);
          bulbs.push(bulb);
        }
        return bulbs;
      }

      function createMusicLauncher(){
        if(document.getElementById('music-launch-btn')) return document.getElementById('music-launch-btn');
        const b = document.createElement('button');
        b.id = 'music-launch-btn';
        b.className = 'music-launch-btn';
        b.textContent = 'Play Music';
        document.body.appendChild(b);
        b.addEventListener('click', async function(){
          // Hide bulb and music button
          body.classList.add('show-birthday-section');
          
          // Show Birthday Surprise Section
          const birthdaySection = document.getElementById('birthday-surprise');
          if(birthdaySection) {
            setTimeout(() => {
              birthdaySection.classList.add('show');
            }, 500);
          }
          
          // Try to play music if available
          if(bgMusic) {
          try{
            if(bgMusic.paused){
              await bgMusic.play();
              b.textContent = 'Pause Music';
                const headerBtn = document.getElementById('music-toggle'); 
                if(headerBtn) headerBtn.textContent='Pause';
            } else {
              bgMusic.pause();
              b.textContent = 'Play Music';
                const headerBtn = document.getElementById('music-toggle'); 
                if(headerBtn) headerBtn.textContent='Play';
                // Hide page content when music is paused
                body.classList.add('waiting-for-music');
                body.classList.remove('music-playing');
                if(container) {
                  container.classList.remove('page-fade-in');
                }
                // Reset page elements
                const pageElements = document.querySelectorAll('.page-element');
                pageElements.forEach(element => {
                  element.classList.remove('show');
                });
                // Show light bulb and button again when paused
                const bulb = document.querySelector('.single-bulb');
                if(bulb) {
                  bulb.style.opacity = '1';
                  bulb.style.transform = 'translate(-50%, -50%) scale(1)';
                  bulb.style.pointerEvents = 'auto';
                }
                // Show music button again
                const musicBtn = document.getElementById('music-launch-btn');
                if(musicBtn) {
                  musicBtn.classList.add('show');
                }
            }
          }catch(err){
              // Even if music fails, show the page
              b.textContent = 'Page Shown';
            }
          } else {
            b.textContent = 'Page Shown';
          }
        });
        return b;
      }


      function revealPage() {
        // Add lights-on to trigger CSS transitions for top lights
        body.classList.add('lights-on');

  // Create and show the single bulb with a smooth fade; hide the multi top-lights so only the single bulb is visible
  if(topLights) topLights.style.display = 'none';
        const bulbs = createSingleBulb();
        // small staggered delay to add visible class so bulbs drop with small offsets
        if(bulbs && bulbs.length){
          bulbs.forEach((b,idx)=>{
            setTimeout(()=>{ b.classList.add('visible'); }, 120 + idx*180);
          });
        }

        // show a music launcher button after lights on so user can start background music
        setTimeout(()=>{
          createMusicLauncher();
          // Show the button slowly after a delay
          setTimeout(() => {
            const musicBtn = document.getElementById('music-launch-btn');
            if(musicBtn) {
              musicBtn.classList.add('show');
            }
          }, 800);
        }, 350);

        // After a short delay, fade out the preload overlay but keep page hidden until music plays
        setTimeout(() => {
          // Fade out and remove the preload overlay for interaction
          if (preload) {
            preload.style.transition = 'opacity 600ms ease';
            preload.style.opacity = '0';
            preload.style.pointerEvents = 'none';
            setTimeout(() => {
              try{ preload.remove(); }catch(e){}
              body.classList.remove('site-hidden');
            }, 650);
          } else {
            body.classList.remove('site-hidden');
          }
        }, 800);
      }

      // Button handler: must be a user gesture to satisfy mobile autoplay rules
      if (btn) {
        btn.addEventListener('click', function onClick(e) {
          revealPage();
          btn.removeEventListener('click', onClick);
        });
        // keyboard accessibility: focus the button so Enter/Space will activate
        try{ btn.focus(); }catch(e){}
      } else {
        // If no button found, reveal immediately after a brief pause
        setTimeout(revealPage, 300);
      }
    })();
  </script>
  
  <script>
    // Ready for Surprise Button Handler
    (function(){
      const surpriseBtn = document.getElementById('ready-surprise-btn');
      const birthdaySection = document.getElementById('birthday-surprise');
      const body = document.body;
      const bgMusic = document.getElementById('bg-music');
      
      if(surpriseBtn) {
        surpriseBtn.addEventListener('click', function(){
          // Hide birthday section
          if(birthdaySection) {
            birthdaySection.classList.remove('show');
            birthdaySection.classList.add('hide');
          }
          
          // Show main page content smoothly
          setTimeout(() => {
            body.classList.remove('waiting-for-music');
            body.classList.add('music-playing');
            
            // Add slow fade animation to container
            const container = document.querySelector('.container');
            if(container) {
              container.classList.add('page-fade-in');
            }
            
            // Add staggered animations to page elements
            setTimeout(() => {
              const pageElements = document.querySelectorAll('.page-element');
              pageElements.forEach((element, index) => {
                setTimeout(() => {
                  element.classList.add('show');
                }, index * 200);
              });
            }, 500);
            
            // Try to play music
            if(bgMusic && bgMusic.paused) {
              bgMusic.play().catch(()=>{});
              const headerBtn = document.getElementById('music-toggle');
              if(headerBtn) headerBtn.textContent='Pause';
            }
          }, 600);
        });
      }
    })();
  </script>
</body>
</html>
